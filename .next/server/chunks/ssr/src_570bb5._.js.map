{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 12, "column": 0}, "map": {"version":3,"sources":["file:///Users/sc_liu/Desktop/ts/dapp/src/app/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { useAccount, useContractRead, useContractWrite, useWaitForTransaction } from 'wagmi'\nimport YDDShowABI from '../contracts/YDDShow.json'\nimport { useStatus } from '@/context/StatusContext'\n\n// ÂêàÁ∫¶Âú∞ÂùÄ\nconst CONTRACT_ADDRESS = '0x87a84EBa190912a9015a2e74056c5ceE28D807B0'\n\n// ‰∏ªÈ°µÁªÑ‰ª∂\nexport default function Home() {\n  // Áä∂ÊÄÅÁÆ°ÁêÜ\n  const [age, setAge] = useState<string>('')\n  const [currentAge, setCurrentAge] = useState<number | null>(null)\n  const [isValidAge, setIsValidAge] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n  const { setStatus } = useStatus()\n\n  // Ëé∑ÂèñÈí±ÂåÖË¥¶Êà∑‰ø°ÊÅØ\n  const { address, isConnected } = useAccount()\n\n  // ËØªÂèñÂêàÁ∫¶ÊñπÊ≥ï\n  const { data: contractAge, refetch } = useContractRead({\n    address: CONTRACT_ADDRESS,\n    abi: YDDShowABI.abi,\n    functionName: 'getAge',\n    watch: true, // Ëá™Âä®ÁõëÂê¨ÂèòÂåñ\n  })\n\n  // ÂÜôÂÖ•ÂêàÁ∫¶ÊñπÊ≥ï\n  const { write: writeContract, data: writeData } = useContractWrite({\n    address: CONTRACT_ADDRESS,\n    abi: YDDShowABI.abi,\n    functionName: 'setAge',\n  })\n\n  // Á≠âÂæÖ‰∫§ÊòìÂÆåÊàê\n  const { isLoading: isWritePending, isSuccess } = useWaitForTransaction({\n    hash: writeData?.hash,\n    onSuccess: () => {\n      // ‰∫§ÊòìÊàêÂäüÂêéÂà∑Êñ∞Âπ¥ÈæÑÊòæÁ§∫\n      refetch()\n      // Ê∏ÖÈô§ÈîôËØØ‰ø°ÊÅØ\n      setError(null)\n      // ËÆæÁΩÆÁä∂ÊÄÅ‰∏∫Â∞±Áª™\n      setStatus('Â∞±Áª™')\n    },\n    onError: (error) => {\n      setError('‰∫§ÊòìÂ§±Ë¥•ÔºåËØ∑ÈáçËØï')\n      console.error('Transaction error:', error)\n      // ËÆæÁΩÆÁä∂ÊÄÅ‰∏∫Â∞±Áª™\n      setStatus('Â∞±Áª™')\n    },\n  })\n\n  // ËÆæÁΩÆÂπ¥ÈæÑ\n  const handleSetAge = async () => {\n    setError(null)\n    if (!age) {\n      setError('*ËØ∑ËæìÂÖ•Âπ¥ÈæÑ')\n      return\n    }\n    \n    const ageNum = parseInt(age)\n    if (isNaN(ageNum) || ageNum <= 0 || ageNum >= 150) {\n      setError('*ËØ∑ËæìÂÖ•ÊôÆÈÄöÁ¢≥Âü∫‰∫∫Á±ªÁöÑÂπ¥ÈæÑ')\n      return\n    }\n\n    if (!writeContract) {\n      setError('*ÂêàÁ∫¶ÂÜôÂÖ•ÊñπÊ≥ïÊú™ÂàùÂßãÂåñÔºåËØ∑Á°Æ‰øùÊÇ®Â∑≤ËøûÊé•Âà∞ Sepolia ÊµãËØïÁΩë')\n      return\n    }\n\n    try {\n      setStatus('ËÆæÁΩÆ‰∏≠...')\n      writeContract({\n        args: [ageNum],\n      })\n      setAge('')\n    } catch (error) {\n      console.error('Error setting age:', error)\n      setError('*ËÆæÁΩÆÂπ¥ÈæÑÂ§±Ë¥•ÔºåËØ∑Á°Æ‰øùÊÇ®Â∑≤ËøûÊé•Âà∞ Sepolia ÊµãËØïÁΩëÂπ∂Êã•ÊúâË∂≥Â§üÁöÑÊµãËØïÂ∏Å')\n      setStatus('Â∞±Áª™')\n    }\n  }\n\n  // Ëé∑ÂèñÂπ¥ÈæÑ\n  const handleGetAge = async () => {\n    setError(null)\n    try {\n      setStatus('Ëé∑Âèñ‰∏≠...')\n      await refetch()\n      const ageValue = Number(contractAge)\n      if (isNaN(ageValue) || ageValue <= 0) {\n        setIsValidAge(false)\n        setCurrentAge(null)\n      } else {\n        setIsValidAge(true)\n        setCurrentAge(ageValue)\n      }\n      setStatus('Â∞±Áª™')\n    } catch (error) {\n      console.error('Error getting age:', error)\n      setIsValidAge(false)\n      setCurrentAge(null)\n      setError('Ëé∑ÂèñÂπ¥ÈæÑÂ§±Ë¥•ÔºåËØ∑ÈáçËØï')\n      setStatus('Â∞±Áª™')\n    }\n  }\n\n  return (\n    <main className=\"container mx-auto p-4\">\n      <div className=\"max-w-2xl mx-auto\">\n        {/* Èí±ÂåÖ‰ø°ÊÅØ */}\n        <div className=\"bg-gray-100 p-4 rounded-lg mb-6\">\n          <h2 className=\"text-xl font-bold mb-2\">Èí±ÂåÖ‰ø°ÊÅØ</h2>\n          <p>\n            <span className=\"font-semibold\">Áä∂ÊÄÅÔºö</span>\n            {isConnected ? 'Â∑≤ËøûÊé•' : 'Êú™ËøûÊé•'}\n          </p>\n          {address && (\n            <p>\n              <span className=\"font-semibold\">Âú∞ÂùÄÔºö</span> {address}\n            </p>\n          )}\n        </div>\n\n        {/* ÂêàÁ∫¶‰∫§‰∫í */}\n        <div className=\"bg-white shadow-md rounded-lg p-6\">\n          <h2 className=\"text-2xl font-bold mb-4\">ÂêàÁ∫¶‰∫§‰∫í</h2>\n          \n          {/* ÈîôËØØÊèêÁ§∫ */}\n          {error && (\n            <div className=\"mb-4 p-3 bg-red-100 text-red-700 rounded-lg\">\n              {error}\n            </div>\n          )}\n\n          {/* ÊàêÂäüÊèêÁ§∫ */}\n          {isSuccess && (\n            <div className=\"mb-4 p-3 bg-green-100 text-green-700 rounded-lg\">\n              Êìç‰ΩúÊàêÂäüÔºÅ\n            </div>\n          )}\n          \n          {/* ËÆæÁΩÆÂπ¥ÈæÑ */}\n          <div className=\"mb-6\">\n            <h3 className=\"text-lg font-semibold mb-2\">ËÆæÁΩÆÂπ¥ÈæÑ</h3>\n            <div className=\"flex gap-2\">\n              <input\n                type=\"number\"\n                value={age}\n                onChange={(e) => setAge(e.target.value)}\n                placeholder=\"ËØ∑ËæìÂÖ•Âπ¥ÈæÑ\"\n                className=\"flex-1 p-2 border rounded\"\n                min=\"1\"\n                max=\"149\"\n              />\n              <button\n                onClick={handleSetAge}\n                className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 disabled:bg-gray-400\"\n                disabled={!isConnected || isWritePending}\n              >\n                {isWritePending ? 'Â§ÑÁêÜ‰∏≠...' : 'ËÆæÁΩÆ'}\n              </button>\n            </div>\n          </div>\n\n          {/* Ëé∑ÂèñÂπ¥ÈæÑ */}\n          <div>\n            <h3 className=\"text-lg font-semibold mb-2\">Ëé∑ÂèñÂπ¥ÈæÑ</h3>\n            <div className=\"flex gap-2 items-center\">\n              <button\n                onClick={handleGetAge}\n                className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 disabled:bg-gray-400\"\n                disabled={!isConnected}\n              >\n                Ëé∑Âèñ\n              </button>\n              {currentAge !== null && isValidAge ? (\n                <span className=\"text-lg\">ÂΩìÂâçÂπ¥ÈæÑÔºö{currentAge}</span>\n              ) : (\n                currentAge === null && !isValidAge && (\n                  <span className=\"text-lg text-gray-500\">sorryÔºåÊ≤°ÊúâÊâæÂà∞ËØ•Êï∞ÊçÆ= =ÔºåÂèØËÉΩÊòØËØ•ÂêàÁ∫¶ËøòÊ≤°ÊúâËÆæÁΩÆÂπ¥ÈæÑÔºåÊàñËÄÖÂá∫Èîô‰∫ÜÔºåËØ∑ËÅîÁ≥ªÂ∑•‰Ωú‰∫∫ÂëòÔºåËôΩÁÑ∂ËÅîÁ≥ª‰∫Ü‰πüÊ≤°Áî®üòÅ</span>\n                )\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    </main>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 325, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}