{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 12, "column": 0}, "map": {"version":3,"sources":["file:///Users/sc_liu/Desktop/ts/dapp/src/app/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { useAccount, useContractRead, useContractWrite, useWaitForTransaction } from 'wagmi'\nimport YDDShowABI from '../contracts/YDDShow.json'\n\n// 合约地址\nconst CONTRACT_ADDRESS = '0xA109Ff0cBF35f3fDf21cD0eEc8a32DE6d6607d2b'\n\n// 主页组件\nexport default function Home() {\n  // 状态管理\n  const [age, setAge] = useState<string>('')\n  const [currentAge, setCurrentAge] = useState<number | null>(null)\n  const [isValidAge, setIsValidAge] = useState(true)\n\n  // 获取钱包账户信息\n  const { address, isConnected } = useAccount()\n\n  // 读取合约方法\n  const { data: contractAge, refetch } = useContractRead({\n    address: CONTRACT_ADDRESS,\n    abi: YDDShowABI.abi,\n    functionName: 'getAge',\n  })\n\n  // 写入合约方法\n  const { write: writeContract, data: writeData } = useContractWrite({\n    address: CONTRACT_ADDRESS,\n    abi: YDDShowABI.abi,\n    functionName: 'setAge',\n  })\n\n  // 等待交易完成\n  const { isLoading: isWritePending } = useWaitForTransaction({\n    hash: writeData?.hash,\n  })\n\n  // 设置年龄\n  const handleSetAge = async () => {\n    if (!age) return\n    try {\n      writeContract({\n        args: [parseInt(age)],\n      })\n      setAge('')\n    } catch (error) {\n      console.error('Error setting age:', error)\n    }\n  }\n\n  // 获取年龄\n  const handleGetAge = async () => {\n    try {\n      await refetch()\n      const ageValue = Number(contractAge)\n      if (isNaN(ageValue) || ageValue <= 0) {\n        setIsValidAge(false)\n        setCurrentAge(null)\n      } else {\n        setIsValidAge(true)\n        setCurrentAge(ageValue)\n      }\n    } catch (error) {\n      console.error('Error getting age:', error)\n      setIsValidAge(false)\n      setCurrentAge(null)\n    }\n  }\n\n  return (\n    <main className=\"container mx-auto p-4\">\n      <div className=\"max-w-2xl mx-auto\">\n        {/* 钱包信息 */}\n        <div className=\"bg-gray-100 p-4 rounded-lg mb-6\">\n          <h2 className=\"text-xl font-bold mb-2\">钱包信息</h2>\n          <p>\n            <span className=\"font-semibold\">状态：</span>\n            {isConnected ? '已连接' : '未连接'}\n          </p>\n          {address && (\n            <p>\n              <span className=\"font-semibold\">地址：</span> {address}\n            </p>\n          )}\n        </div>\n\n        {/* 合约交互 */}\n        <div className=\"bg-white shadow-md rounded-lg p-6\">\n          <h2 className=\"text-2xl font-bold mb-4\">合约交互</h2>\n          \n          {/* 设置年龄 */}\n          <div className=\"mb-6\">\n            <h3 className=\"text-lg font-semibold mb-2\">设置年龄</h3>\n            <div className=\"flex gap-2\">\n              <input\n                type=\"number\"\n                value={age}\n                onChange={(e) => setAge(e.target.value)}\n                placeholder=\"请输入年龄\"\n                className=\"flex-1 p-2 border rounded\"\n                min=\"1\"\n                max=\"149\"\n              />\n              <button\n                onClick={handleSetAge}\n                className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 disabled:bg-gray-400\"\n                disabled={!isConnected || isWritePending}\n              >\n                {isWritePending ? '处理中...' : '设置'}\n              </button>\n            </div>\n          </div>\n\n          {/* 获取年龄 */}\n          <div>\n            <h3 className=\"text-lg font-semibold mb-2\">获取年龄</h3>\n            <div className=\"flex gap-2 items-center\">\n              <button\n                onClick={handleGetAge}\n                className=\"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 disabled:bg-gray-400\"\n                disabled={!isConnected}\n              >\n                获取\n              </button>\n              {currentAge !== null && isValidAge ? (\n                <span className=\"text-lg\">当前年龄：{currentAge}</span>\n              ) : (\n                currentAge === null && !isValidAge && (\n                  <span className=\"text-lg text-gray-500\">sorry，没有找到该数据= =</span>\n                )\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    </main>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 285, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}